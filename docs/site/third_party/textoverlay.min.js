// https://github.com/yuku-t/textoverlay/blob/v0.2.0/dist/bundle.min.js
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Textoverlay=t():e.Textoverlay=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){Object.keys(t).forEach(function(r){e.style.setProperty(r,t[r])})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n={wrapper:{"box-sizing":"border-box",overflow:"hidden"},overlay:{"box-sizing":"border-box","border-color":"transparent","border-style":"solid",color:"transparent",position:"absolute","white-space":"pre-wrap","word-wrap":"break-word",overflow:"hidden",width:"100%"},textarea:{background:"transparent","box-sizing":"border-box",outline:"none",position:"relative",height:"100%",width:"100%",margin:"0px"}},o={wrapper:["background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","display","margin-top","margin-right","margin-bottom","margin-left"],overlay:["font-family","font-size","font-weight","line-height","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width"]},s=function(){function e(t,i){var o=this;if(r(this,e),!t.parentElement)throw new Error("textarea must be in the DOM tree");this.textarea=t,this.textareaStyle=window.getComputedStyle(t),this.createWrapper(),this.createOverlay(),this.textareaStyleWas={},Object.keys(n.textarea).forEach(function(e){o.textareaStyleWas[e]=o.textarea.style.getPropertyValue(e)}),a(this.textarea,n.textarea),this.strategies=i,this.handleInput=this.handleInput.bind(this),this.handleScroll=this.handleScroll.bind(this),this.handleResize=this.handleResize.bind(this),this.textarea.addEventListener("input",this.handleInput),this.textarea.addEventListener("scroll",this.handleScroll),this.observer=new MutationObserver(this.handleResize),this.observer.observe(this.textarea,{attributes:!0,attributeFilter:["style"]}),this.wrapperDisplay=this.wrapper.style.display,this.render()}return i(e,[{key:"createWrapper",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="textoverlay-wrapper",a(this.wrapper,n.wrapper),this.wrapper.style.position="static"===this.textareaStyle.position?"relative":this.textareaStyle.position,this.textarea.parentElement.insertBefore(this.wrapper,this.textarea),this.wrapper.appendChild(this.textarea)}},{key:"createOverlay",value:function(){this.overlay=document.createElement("div"),this.overlay.className="textoverlay",a(this.overlay,n.overlay),this.copyTextareaStyle(this.overlay,o.overlay),this.wrapper.insertBefore(this.overlay,this.textarea)}},{key:"destroy",value:function(){this.textarea.removeEventListener("input",this.handleInput),this.textarea.removeEventListener("scroll",this.handleScroll),this.observer.disconnect(),this.overlay.remove(),a(this.textarea,this.textareaStyleWas);var e=this.wrapper.parentElement;e&&(e.insertBefore(this.textarea,this.wrapper),this.wrapper.remove())}},{key:"render",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.update(),this.sync()}},{key:"update",value:function(){for(var e=this;this.overlay.firstChild;)this.overlay.removeChild(this.overlay.firstChild);this.computeOverlayNodes().forEach(function(t){return e.overlay.appendChild(t)})}},{key:"sync",value:function(){this.overlay.style.top=-this.textarea.scrollTop+"px";var e=this.wrapper.getBoundingClientRect();this.wrapper.style.height=e.height+"px","block"!==this.wrapperDisplay&&(this.wrapper.style.width=e.width+"px")}},{key:"computeOverlayNodes",value:function(){return this.strategies.reduce(function(e,t){var r=document.createElement("span");return a(r,t.css),Array.prototype.concat.apply([],e.map(function(e){if(e.nodeType!=Node.TEXT_NODE)return e;for(var a=e.textContent,i=[];;){var n=t.match.lastIndex,o=t.match.exec(a);if(!o){i.push(document.createTextNode(a.slice(n)));break}var s=o[0];i.push(document.createTextNode(a.slice(n,t.match.lastIndex-s.length)));var l=r.cloneNode();l.textContent=s,i.push(l)}return i}))},[document.createTextNode(this.textarea.value)])}},{key:"handleInput",value:function(){this.render()}},{key:"handleScroll",value:function(){this.render(!0)}},{key:"handleResize",value:function(){this.render(!0)}},{key:"copyTextareaStyle",value:function(e,t){var r=this;t.forEach(function(t){e.style.setProperty(t,r.textareaStyle.getPropertyValue(t))})}}]),e}();t.default=s}]).default});
